# name: 'app'

# type: 'java:21'

# hooks:
#     build: |
#         # Gradle needs to have the application plugin included so that it
#         # can build a fully self-contained and executable application.
#         # The daemon needs to be disabled so that it doesn't persist in the
#         # build environment.
#         ./gradlew installDist --no-daemon

# #relationships:
# #    database: 'mysqldb:mysql'

# web:
#     upstream:
#         socket_family: tcp
#         protocol: http
#     commands:
#         # Platform.sh environment variables need to be mapped into Java system properties
#         # manually.  This small Python script handles that.
#         start: "python platformsh.py"
#     locations:
#         /:
#             passthru: true

# disk: 512


# The name of this app. Must be unique within a project.
name: devis-rapide-back

# The runtime the application uses. The 'type' key defines the base container
# image that will be used to run the application. There is a separate base
# container image for each primary language for the application,
# in multiple versions. Check the Java documentation
# (https://docs.platform.sh/languages/java.html#supported-versions)
# to find the supported versions for the 'java' type.
type: 'java:21'

# The following block defines a single writable directory, 'web/uploads'
# The 'source' specifies where the writable mount is. The 'local' source
# indicates that the mount point will point to a local directory on the
# application container. The 'source_path' specifies the subdirectory
# from within the source that the mount should point at. 
#mounts:
#  'web/uploads':
#    source: local
#    source_path: uploads

# The size of the persistent disk of the application (in MB).
disk: 2048

hooks:
    build:
      ./gradlew clean build

web:
  commands: 
    start: "java -jar build/libs/devis-rapide-0.0.1-SNAPSHOT.jar --server.port=$PORT"